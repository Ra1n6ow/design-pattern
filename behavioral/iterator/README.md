# 迭代器模式

迭代器模式（Iterator Pattern）用于提供一种方法来顺序访问一个聚合对象中的各个元素，而无需暴露其内部实现方式。迭代器模式将迭代操作从聚合对象中分离出来，让客户端可以独立地遍历聚合对象中的元素，同时保持代码的简洁性和可维护性。
 
绝大多数情况下 Go 程序是不需要用迭代器的。因为内置的 slice 和 map 两种容器都可以通过 range 进行遍历，并且这两种容器在性能方面做了足够的优化。只要没有特殊的需求，通常是直接用这两种容器解决问题。即使不得不写了一个自定义容器，我们几乎总是可以实现一个函数，把所有元素（的引用）拷贝到一个 slice 之后返回，这样调用者又可以直接用 range 进行遍历了。

当然某些特殊场合迭代器还是有用武之地。比如迭代器的 Next() 是个耗时操作，不能一口气拷贝所有元素；再比如某些条件下需要中断遍历。

在迭代器模式中，通常包含以下几个关键角色：

- 迭代器（Iterator）接口：定义访问和遍历元素的方法，包括 Next()、HasNext()等；
- 具体迭代器（Concrete Iterator）：实现迭代器接口，并提供对具体聚合对象（如数组、列表）的迭代逻辑；
- 聚合对象（Aggregate）接口：定义创建迭代器的方法；
- 具体聚合对象（Concrete Aggregate）：实现聚合对象接口，提供具体数据结构（如数组、列表）的管理和遍历逻辑。
