# 命令模式

命令模式（Command Pattern）将请求以命令的形式包裹在对象里面，传递给调用对象，调用对象寻找匹配该命令的对象，将命令给该对象执行。调用对象可以在执行命令前和执行命令后，进行一些通用或者增强操作，例如：排队请求、记录命令运行日志、撤销命令等。命令模式可以将请求的发送者和接收者解耦，使系统更加灵活和可扩展。

命令模式执行命令时，步骤大概可以分为以下三步：

1. 命令被包裹在请求对象里，传递给调用对象；
2. 调用对象查找匹配该命令（可以处理该命令）的对象，将该命令传递给匹配的对象；
3. 该对象执行传递给它的命令。

一般而言，在软件开发中，行为的请求者和行为的执行者是紧密耦合在一起的，调用关系简单易懂，但是这样不容易拓展，有些时候，我们需要记录、撤销、重做处理的时候，不易修改。因此我们需要将命令抽象化，封装起来，不直接调用真正的执行者方法，易于拓展。

举个现实中的例子，比如我们去餐厅吃饭：点餐（写好菜单，发起请求） --> 订单系统处理，生成订单（创建命令） --> 厨师获取到订单，开始做菜（执行命令），在这个过程中我们并没有直接与厨师交谈，不知道那个厨师做，厨师也不知道是哪个顾客需要，只需要按照订单处理就可以。

又比如，我们经常使用智能音响，我经常叫它 ”小度小度，帮我打开空调“，”小度小度，帮我打开窗帘“等等，在整个过程中，我发出命令 --> 小度接受到命令，包装成为请求 --> 让真正接收命令的对象处理（空调或者窗帘控制器），我没有手动去操作空调和窗帘，小度也可以接受各种各样的命令，只要接入它，我都通过它去操作。

在命令模式中，通常包含以下几个关键角色：

- 命令接口（Command Interface）：将命令抽象成一个接口，不同的命令执行不同的操作；
- 具体命令（Concrete Command）：实现了命令接口，包含了实际执行操作的方法；
- 调用者（Invoker）：请求的封装发送者，它通过命令对象来执行请求，不会直接操作接受者，而是直接关联命令对象，间接调用到接受者的相关操作；
- 接收者（Receiver）：真正执行命令的对象，接收并执行命令对象指定的操作；
- Client(客户端)：一般我们在客户端中创建调用者对象，具体的命令类，去执行命令。
