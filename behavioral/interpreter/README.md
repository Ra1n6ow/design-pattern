# 解释器模式

解释器模式（Interpreter Pattern）用于定义一种语言的文法，并提供一个解释器来解释该语言中的表达式。解释器模式将文法表示成一个语法树，并通过解释器逐个解释语法树节点，从而实现根据特定规则解释和执行程序。

解释器模式（Interpreter Pattern）的本质是就是自己定一套规则、语言、表达方式,也就是所谓的 DSL（Domain Specific Language），然后按照定义解析执行 DSL，常见的自定义协议，私有协议，就是一个中解释器模式的概念，使用者按照协议的规则做事。

解释器模式的意义在于，它分离多种复杂功能的实现，每个功能只需关注自身的解释。对于调用者不用关心内部的解释器的工作，只需要用简单的方式组合命令。

常见的 Redis 协议就是一个很好解释器模式实现，通过 redis-cli 可以发送各种指令给到 redis-server，服务端解释执行后返回结果。

我们常说的计算器，是一个很典型的解释器模式，它用来解释执行加减乘除的运行规则，现实生活中，哑语翻译、音乐乐谱、摩尔斯电码，道路交通指示系统，等都是解释器模式的好例子。

我们来设计一个简单交流标识系统，来表达会议中两个人交流时候的谈话方式，以代替冗长的语言表述：

A "->" B 表示 A 说，B 听，此时 B 不能发言。

A "<-" B 表示 B 说，A 听，此时 B 不能发言。

A "<->" B 表示 A 和 B 可以自由发言。

在解释器模式中，通常包含以下几个关键角色：

- 抽象表达式（Abstract Expression）：定义了解释器的接口，包括一个 Interpret()方法，用于解释表达式。
- 终端表达式（Terminal Expression）：表示语言中的最小单位，实现了抽象表达式的接口。
- 非终端表达式（Non-terminal Expression）：由多个终端表达式组合而成，也符合抽象表达式的接口。
