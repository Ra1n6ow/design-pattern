# 单例模式

单例模式（Singleton Pattern），是最简单的一个模式。在 Go 中，单例模式指的是全局只有一个实例，并且它负责创建自己的对象。单例模式不仅有利于减少内存开支，还有减少系统性能开销、防止多个实例产生冲突等优点。

因为单例模式保证了实例的全局唯一性，而且只被初始化一次，所以比较适合全局共享一个实例，且只需要被初始化一次的场景，例如数据库实例、全局配置、全局任务池等。

单例模式又分为饿汉方式和懒汉方式。饿汉方式指全局的单例实例在包被加载时创建，而懒汉方式指全局的单例实例在第一次被使用时创建。你可以看到，这种命名方式非常形象地体现了它们不同的特点。

在实际项目开发中，饿汉方式和懒汉方式，都被大量使用。其中，饿汉方式使用的最多。饿汉方式在初始化的时候创建，因为初始化一般是单协程的，所以不存在并发初始化实例的场景，可以认为是并发安全的。但在实际开发中，为了防止多个协程同时初始化，最好还是在初始化资源的时候加锁处理。饿汉方式的一个小缺点，就是不管实例需不需要，都会被初始化，在某些场景下，会带来一些额外的资源消耗。

懒汉方式跟饿汉方式的优缺点刚好颠倒过来。懒汉方式，在真正使用的时候创建实例，所以可以避免一定的资源浪费。但是懒汉方式可能会面临多个协程都去使用资源，带来一些并发问题，所以实例初始化时，需要加锁。

在实际开发中，其实二者区别不大，你可以根据需要自行选择一个即可。如果不知道如何选择，那就直接选择最直接的饿汉方式。
