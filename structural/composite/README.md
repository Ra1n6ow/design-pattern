# 组合模式

组合模式（Composite Pattern）主要可以应用在带有树状关系的业务场景。比如一个文件系统包含了很多的文件夹，每一个文件夹下面又包含了许多的文件，彼此之间的关系组成了一颗树状的结构。我们可以将这颗树理解成一个大的容器，容器里面包含很多的成员对象，这些成员对象即可是容器对象【非叶子结点】也可以是叶子对象【叶子节点】。但是由于容器对象和叶子对象在功能上面的区别，使得我们在使用的过程中必须要区分容器对象和叶子对象，但是这样就会给客户带来不必要的麻烦，作为客户，它始终希望能够一致的对待容器对象和叶子对象。

提示：组合模式，有的文章中也叫复合模式。

比如计算机的文件系统，文件系统由文件和目录组成，目录下面也可以包含文件或者目录，计算机的文件系统是用递归结构来进行组织的，对于这样的数据结构是非常适用使用组合模式的。

组合模式用于将对象组合成树形结构以表示“整体-部分”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性，客户端无需区分单个对象和组合对象，可以统一处理。

组合模式的各角色定义如下：

- Component（组件接口）：所有复合节点与叶节点的高层抽象，定义出需要对组件操作的接口标准。对应本章例程中的抽象节点类，具体使用接口还是抽象类需根据具体场景而定。
- Composite（复合组件）：包含多个子组件对象（可以是复合组件或叶端组件）的复合型组件，并实现组件接口中定义的操作方法。对应本章例程中作为“根节点/枝节点”的文件夹类。
- Leaf（叶端组件）：不包含子组件的终端组件，同样实现组件接口中定义的操作方法。对应本章例程中作为“叶节点”的文件类。
- Client（客户端）：按所需的层级关系部署相关对象并操作组件接口所定义的接口，即可遍历树结构上的所有组件。

在 Go 语言中，组合模式通常通过接口和结构体的嵌套来实现。具体的组件类可以实现相同的接口，组合类同时持有子组件实例的集合，实现对整体和部分的统一操作。
